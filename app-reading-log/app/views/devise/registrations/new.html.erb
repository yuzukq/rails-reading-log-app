<div class="bg_pattern Lines_v3"></div>
<div class="reading-list-container">
  <h1 class="page-title">新規ユーザー登録</h1>

  <div class="form-container">
    <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
      <%= render "devise/shared/error_messages", resource: resource %>

      <div class="field">
        <%= f.label :user_name, "ユーザー名" %>
        <%= f.text_field :user_name, autofocus: true, class: "validation-input", 
            minlength: "1",
            required: true %>
      </div>

      <div class="field">
        <%= f.label :password, "パスワード" %>
        <%= f.password_field :password, autocomplete: "new-password", 
            class: "validation-input",
            minlength: "6",
            required: true,
            id: "password" %>
        <% if @minimum_password_length %>
          <span class="password-hint">(<%= @minimum_password_length %>文字以上)</span>
        <% end %>
      </div>

      <div class="field">
        <%= f.label :password_confirmation, "パスワード（確認）" %>
        <%= f.password_field :password_confirmation, autocomplete: "new-password", 
            class: "validation-input",
            required: true,
            id: "password_confirmation",
            pattern: "^(?=.*[A-Za-z0-9]).{6,}$" %>
      </div>

      <div class="actions">
        <%= f.submit "登録", class: "submit-button" %>
        <%= link_to "ログイン", new_user_session_path, class: "back-link" %>
      </div>
    <% end %>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const password = document.getElementById('password');
  const passwordConfirmation = document.getElementById('password_confirmation');

  function validatePasswordConfirmation() {
    if (passwordConfirmation.value === password.value) {
      passwordConfirmation.setCustomValidity('');
    } else {
      passwordConfirmation.setCustomValidity('パスワードが一致しません');
    }
  }

  password.addEventListener('input', validatePasswordConfirmation);
  passwordConfirmation.addEventListener('input', validatePasswordConfirmation);
});
</script> 